<!DOCTYPE html>
<html lang="de">
<head>
  <title>Mein Mandala</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
</head>


<body onload="handle_input()">

  <!-- Header -->
<header class="w3-display-container w3-content w3-center" style="max-width:1500px">
  <img class="w3-image" src="images/gruen.jpg" alt="Me" width="1500" height="600">
  <div class="w3-display-middle w3-padding-large w3-wide w3-text-light-grey w3-center">
    <h1 class="w3-hide-medium w3-hide-small w3-xxxlarge" style="white-space:nowrap">❁ MEIN MANDALA ❁</h1>
    <h2 class="w3-hide-large" style="white-space:nowrap">❁ MEIN MANDALA ❁</h2>
  </div>
  
  <!-- Navbar (placed at the bottom of the header image) -->
  <div class="w3-bar w3-light-grey w3-round w3-display-bottommiddle w3-hide-small" style="bottom:-16px">
    <a href="#" class="w3-bar-item w3-button">Home</a>
    <a href="#portfolio" class="w3-bar-item w3-button">Gallerie</a>
    <a href="#contact" class="w3-bar-item w3-button">Kontakt</a>
  </div>
</header>

<!-- Navbar on small screens -->
<div class="w3-center w3-light-grey w3-padding-16 w3-hide-large w3-hide-medium">
<div class="w3-bar w3-light-grey">
  <a href="#" class="w3-bar-item w3-button">Home</a>
  <a href="#portfolio" class="w3-bar-item w3-button">Gallerie</a>
  <a href="#contact" class="w3-bar-item w3-button">Kontakt</a>
</div>
</div>

<!-- Page content -->

<div class="w3-content w3-padding-large w3-margin-top" id="portfolio">
  <h4><b><font color=#053>Mandala</font></b></h5>

  <div class="w3-section">
    <b>Satz oder Wort</b>
    <br><input type="text" id="satz" value="" py-keyup="handle_input()" size=35px required />
    <span class="validity"></span>
</div>

<div class="w3-section">
    <b>Symmetriezahl</b><br>
    <input id="rad3" type="radio" name="symm" value="3" py-click="handle_input()"><label for="rad3"> 3</label> &nbsp;&nbsp;
    <input id="rad1" type="radio" name="symm" value="0" py-click="handle_input()"><label for="rad1"> 4 (Rauten)</label> &nbsp;&nbsp;
    <input id="rad2" type="radio" name="symm" value="1" py-click="handle_input()"><label for="rad2"> 4 (Quadrate)</label><br>
    <input id="rad5" type="radio" name="symm" value="5" py-click="handle_input()" checked><label for="rad5"> 5</label> &nbsp;&nbsp;
    <input id="rad6" type="radio" name="symm" value="6" py-click="handle_input()"><label for="rad6"> 6</label> &nbsp;&nbsp;
    <input id="rad7" type="radio" name="symm" value="7" py-click="handle_input()"><label for="rad7"> 7</label> &nbsp;&nbsp;
    <input id="rad8" type="radio" name="symm" value="8" py-click="handle_input()"><label for="rad8"> 8</label> &nbsp;&nbsp;
    <input id="rad9" type="radio" name="symm" value="9" py-click="handle_input()"><label for="rad9"> 9</label>
</div>

<div class="w3-section">
    <b>Rhythmuszahl</b> (für Punkte)<br>
    <input type="checkbox" name="rhyt" value="1" py-click="points_input()"> 1 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="2" py-click="points_input()"> 2 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="3" py-click="points_input()"> 3 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="4" py-click="points_input()"> 4 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="5" py-click="points_input()"> 5<br>
    <input type="checkbox" name="rhyt" value="6" py-click="points_input()"> 6 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="7" py-click="points_input()"> 7 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="8" py-click="points_input()"> 8 &nbsp;&nbsp;
    <input type="checkbox" name="rhyt" value="9" py-click="points_input()"> 9<br>
    <input type="checkbox" name="gross" value="1" py-click="points_input()"> Grosse Punkte
</div>

<button id="input-button" py-click="handle_input()"><b>Matrix berechnen</b></button>
oder
<button id="input-button" py-click="points_input()"><b>Punkte berechnen</b></button>

<p id="output1"></p>
<font color=#35f><p id="output2"></p></font>

<button id="input-button" onclick="draw()"><b>Grafik erstellen</b></button>

<p id="output3"></p>

<section id="editor">
    <textarea id="code" hidden>
    <!--<textarea id="code">-->
    </textarea>
    <p>&nbsp;</p>
    <div id="output"></div>
</section>

<script src="script_draw.js" defer=""></script>
<script src="tikzjax.js" defer=""></script>

<br><br>
<small>
    <p>Es gibt eine Komplexitätsgrenze für Grafiken, die im Browser dargestellt werden. Wenn die Grafik diese Grenze überschreitet, wird sie nicht gerendert. Stattdessen können leere Stellen in der Matrix bleiben. Das geschieht z.B. bei Symmetriezahl 9 oder bei Quadraten.</p>
</small>

  <div>
    <py-script>
        def handle_input():
            import math
            import sys
            a = ""
            display('', target="output1", append=False)
            display('', target="output2", append=False)
            display('', target="output3", append=False)
            ######## Input Satz, Symmetriezahl und Raute/Quadrat ########
            satz = Element('satz').element.value
            if len(satz) > 1:
                ## Symmetriezahl s (line 6)
                display('Satz: ' + satz, target="output1")
                ## Abfrage Checkboxen
                q = js.document.querySelector("[name='symm']:checked").value
                checkboxes = js.document.getElementsByName('rhyt');
                vals = []
                for i in range(0, checkboxes.length):
                    if checkboxes[i].checked:
                        vals.append(int(checkboxes[i].value))
                ##r = js.document.querySelector("[name='rhyt']:checked").value
                if int(q) == 0:
                    s = 4
                    display('Algorithmus: Rauten', target="output1")
                elif int(q) == 1:
                    s = 4
                    display('Algorithmus: Quadrate', target="output1")
                else:
                    s = int(q)
                    q = 0
                    display('Algorithmus: Rauten', target="output1")
                display('Symmetriezahl: ' + str(s), target="output1")
                display('Rhythmuszahlen: ' + str(vals), target="output1")
                zahlen = [ord(c) for c in satz]
                ######## Buchstaben in Ziffern umrechnen ########
                w = []
                for i in range(0, len(satz)):
                    z = zahlen[i]
                    # Grossbuchstaben
                    if z >= 65 and z <= 90:
                        z = (z-65) % 9 + 1
                        w.append(z)
                    # Kleinbuchstaben
                    elif z >= 97 and z <= 122:
                        z = (z-97) % 9 + 1
                        w.append(z) 
                    # Zahlen
                    elif z >= 48 and z <= 57:
                        z = (z-48)
                        w.append(z) 
                    # ä
                    elif z == 228:
                        w.extend([1,5])
                    # ö
                    elif z == 246:
                        w.extend([6,5])
                    # ü
                    elif z == 252:
                        w.extend([3,5])
                    # Ä
                    elif z == 196:
                        w.extend([1,5])
                    # Ö
                    elif z == 214:
                        w.extend([6,5])
                    # Ü
                    elif z == 220:
                        w.extend([3,5])
                    # ß
                    elif z == 223:
                        w.extend([1,1])
                    # à
                    elif z == 224:
                        w.append(1)
                    # é
                    elif z == 233:
                        w.append(5)
                    # è
                    elif z == 232:
                        w.append(5)
                    # â
                    elif z == 226:
                        w.append(1)
                    # Alle anderen Zeichen
                    else:
                        w.append(0)
                ##display('Alle Buchstabenwerte: ' + str(w), target="output1")
                ######## Sonderzeichen entfernen ########
                try:
                    while True:
                        w.remove(0)
                except ValueError:
                    pass
                ##display('Relevante Buchstabenwerte: ' + str(w), target="output1")
                ######## Länge des reduzierten Satzes maximal 6 ########
                if len(satz) < 6:
                    l = len(satz)
                else:
                    l = 6
                ##display('Reduzierter Satz Länge: ' + str(l), target="output1")
                ######## Auf l Ziffern reduzieren durch Summe & Quersumme ########
                while len(w) > l:
                    linie = []
                    for i in range(0, len(w)-1):
                        x = w[i] + w[i+1]
                        if x > 9:
                            x = sum(int(y) for y in str(x))
                        linie.append(x)
                    w = linie
                vektoren = []
                vektoren.append(w)
                buchstabenwerte = ' '.join(str(i) for i in w)
                display('Buchstabenwerte: ' + buchstabenwerte, target="output1")
                ######## 1. Algorithmus für Rauten ########
                if int(q)==0:
                    try:
                    ##display('Algorithmus für Rauten', target="output1")
                        ######## Iterationsschritte it ########
                        ## Iter. nach Länge: [0, 1, 2, 3, 4, 5, 6]
                        iterationsschritte = [0, 1, 2, 2, 3, 4, 4]
                        it = iterationsschritte[l]
                        ##display('Iterationsschritte: ' + str(it), target="output1")
                        ######## Dreieckslinien berechnen ########
                        for k in range(1,it):
                            w2 = []
                            w = vektoren[k-1]
                            linie = []
                            if k % 2 == 0:
                                imax = len(w)-1
                            else:
                                imax = len(w)
                            for i in range(1,imax):
                                if i == 1:
                                    x = w[1] + w[1]
                                else:
                                    x = x + w[i]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                linie.append(x)
                            w2 = linie
                            ##display('Buchstabenwerte Linie ' + str(k+1) + ': ' + str(w2), target="output1")
                            vektoren.append(w2)
                        maxi = 2*l-1
                        ##display('Maximaler Index: ' + str(maxi), target="output1")
                        ##display('Seitenlänge der Matrix: ' + str(maxi+1), target="output1")
                        ##display('Vektoren halb: ' + str(vektoren), target="output1")
                        ######## Vektoren spiegeln #######
                        v=vektoren
                        if l < 6:
                            corr = 1
                        else:
                            corr = 2
                        for i in range(0,l-corr):
                            v[i] = vektoren[i][:]
                            if i % 2 == 0:
                                v_inv = vektoren[i][:]
                            else:
                                v_inv = vektoren[i][0:len(v[i])-1]
                            v_inv.reverse()
                            v[i].extend(v_inv)
                        ##display('Vektoren: ' + str(v), target="output1")
                        ######## Matrix eines Dreiecks aus den Vektoren ########
                        ##display('Maximaler Index: ' + str(maxi), target="output1")
                        m = [[0 for col in range(maxi+1)] for row in range(maxi+1)]
                        for n in range(0,it):
                            for i in range(0,maxi+1):
                                for j in range(0,maxi+1):
                                    if (i==n or j==n or i+j==(maxi-n)) and (i>(n-1) and j>(n-1) and i<(maxi-2*n+1) and j<(maxi-2*n+1)):
                                        m[i][j] = v[n][max(i,j)-n]
                        ##display('Matrix: ' + str(m), target="output1")
                        ######## Geometrie Rauten ########
                        xs = math.cos((90-360/int(s))*math.pi/180)
                        ys = math.sin((90-360/int(s))*math.pi/180)
                        ##display('xs: ' + str(xs), target="output1")
                        ##display('ys: ' + str(ys), target="output1")
                        ######## TikZJax Latex Code Rauten ########
                        a = ""
                        a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        a = a + "\\draw [line width=0.5mm, rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (0,0) -- (" + str(maxi+1) + ",0);"
                        a = a + "\\foreach \i in {0,1,...," + str(maxi) + "}{"
                        a = a + "\\foreach \j in {0,...,\i}{"
                        a = a + "\\draw [line width=0.05mm, rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+1) + "-\i,\j) rectangle (" + str(maxi) + "-\i,\j+1);"
                        a = a + "}}}"
                        if s == 9 and l == 6:
                            a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(280) + "}{"
                        else:
                            a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        for i in range(0, maxi+1):
                            for j in range(0, i+1):
                                a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [anchor = center]{" + str(m[maxi-i][j]) + "};"
                        a = a + "}"
                    except:
                        pass
                ######## 2. Algorithmus für Quadrate ########
                else:
                    try:
                        #### Kleine Matrix berechnen
                        ma = [[0 for col in range(l)] for row in range(l)]
                        ma[0][:] = w[:]
                        for i in range (1,l):
                            ma[i][i] = w[0]
                            ma[l-i][l-1] = w[i-1]
                        if l == 6:
                            ma[1][l-2] = w[l-1]
                            ma[1][l-3] = w[l-4]
                            ma[1][l-4] = w[l-3]
                            ma[2][l-3] = w[1]
                        if l == 5:
                            ma[1][1:l] = w[0:l-1]
                            ma[1:l][1] = w[0:l-1]
                            ma[2][l-2] = w[l-2]
                        elif l == 4:
                            ma[1][l-2] = w[l-1]
                        if l % 2 == 0:
                            ## Spiegeln
                            for i in range (0,l):
                                for j in range(0,l):
                                    ma[l-i-1][l-j-1] = ma[j][i]
                        ## Spiegeln
                        for i in range (0,l):
                            for j in range(0,i):
                                ma[l-j-1][l-i-1] = ma[j][i]
                        if l == 5:
                            ma[2][1] = ma[1][2]
                            ma[3][2] = ma[2][3]
                        ##display('Kleine Matrix: ' + str(ma), target="output1")
                        #### Grosse Matrix berechnen (Quadrant)
                        maxi = l + 12
                        m = [[0 for col in range(maxi)] for row in range(maxi)]
                        for i in range (0,l):
                            m[i][0:l] = ma[i][0:l]
                        for i in range (0,l):
                            for k in range (l,maxi):
                                x = m[i][k-1] + m[i][k-2]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                m[i][k] = x
                        for j in range (0,maxi):
                            for k in range (l,maxi):
                                x = m[k-1][j] + m[k-2][j]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                m[k][j] = x
                        ##display('Matrix: ' + str(m), target="output1")
                        maxi = maxi-1
                        ######## Geometrie Quadrate ########
                        xs = 1
                        ys = 0
                        ##display('xs: ' + str(xs), target="output1")
                        ##display('ys: ' + str(ys), target="output1")
                        ######## TikZJax Latex Code Quadrate ########
                        a = ""
                        a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        a = a + "\\draw [line width=0.5mm, rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (0,0) -- (" + str(maxi+1) + ",0);"
                        a = a + "\\foreach \i in {0,1,...," + str(maxi) + "}{"
                        a = a + "\\foreach \j in {0,1,...," + str(maxi) + "}{"
                        a = a + "\\draw [line width=0.05mm, rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+1) + "-\i,\j) rectangle (" + str(maxi) + "-\i,\j+1);"
                        a = a + "}}}"
                        if l > 3:
                            a = a + "\\foreach \\r in {0}{"
                        elif l > 2:
                            a = a + "\\foreach \\r in {0, 90}{"
                        elif l > 1:
                            a = a + "\\foreach \\r in {0,90, ..., 180}{"
                        else:
                            a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        for i in range(0, maxi+1):
                            for j in range(0, maxi+1):
                                a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [anchor = center]{" + str(m[maxi-i][j]) + "};"
                        a = a + "}"
                    except:
                        pass
                display('Matrix fertig berechnet.', target="output2")
                display('Das Erstellen der Grafik kann bis zu 10 Sek. dauern.', target="output3")
            else:
                display('', target="output1", append=False)
                display('Satz zu kurz (mind. 2 Zeichen).', target="output1")
                a = ""
                display('Keine Matrix berechnet.', target="output2")
            ######## Latex Code in Textfeld schreiben ########
            manual = Element("code")
            manual.element.innerText = a
    </py-script>
  </div>

  <div>
    <py-script>
        def points_input():
            import math
            import sys
            a = ""
            display('', target="output1", append=False)
            display('', target="output2", append=False)
            display('', target="output3", append=False)
            ######## Input Satz, Symmetriezahl und Raute/Quadrat ########
            satz = Element('satz').element.value
            if len(satz) > 1:
                ## Symmetriezahl s (line 6)
                display('Satz: ' + satz, target="output1")
                ## Abfrage Checkboxen
                q = js.document.querySelector("[name='symm']:checked").value
                checkboxes = js.document.getElementsByName('rhyt');
                checkbox_gross = js.document.getElementsByName('gross');
                if checkbox_gross[0].checked:
                    gross = "ja"
                else:
                    gross = "nein"
                rhyt = []
                for i in range(0, checkboxes.length):
                    if checkboxes[i].checked:
                        rhyt.append(int(checkboxes[i].value))
                if int(q) == 0:
                    s = 4
                    display('Algorithmus: Rauten', target="output1")
                elif int(q) == 1:
                    s = 4
                    display('Algorithmus: Quadrate', target="output1")
                else:
                    s = int(q)
                    q = 0
                    display('Algorithmus: Rauten', target="output1")
                display('Symmetriezahl: ' + str(s), target="output1")
                display('Rhythmuszahlen: ' + str(rhyt), target="output1")
                ##display('Grosse Punkte: ' + str(gross), target="output1")
                zahlen = [ord(c) for c in satz]
                ######## Buchstaben in Ziffern umrechnen ########
                w = []
                for i in range(0, len(satz)):
                    z = zahlen[i]
                    # Grossbuchstaben
                    if z >= 65 and z <= 90:
                        z = (z-65) % 9 + 1
                        w.append(z)
                    # Kleinbuchstaben
                    elif z >= 97 and z <= 122:
                        z = (z-97) % 9 + 1
                        w.append(z) 
                    # Zahlen
                    elif z >= 48 and z <= 57:
                        z = (z-48)
                        w.append(z) 
                    # ä
                    elif z == 228:
                        w.extend([1,5])
                    # ö
                    elif z == 246:
                        w.extend([6,5])
                    # ü
                    elif z == 252:
                        w.extend([3,5])
                    # Ä
                    elif z == 196:
                        w.extend([1,5])
                    # Ö
                    elif z == 214:
                        w.extend([6,5])
                    # Ü
                    elif z == 220:
                        w.extend([3,5])
                    # ß
                    elif z == 223:
                        w.extend([1,1])
                    # à
                    elif z == 224:
                        w.append(1)
                    # é
                    elif z == 233:
                        w.append(5)
                    # è
                    elif z == 232:
                        w.append(5)
                    # â
                    elif z == 226:
                        w.append(1)
                    # Alle anderen Zeichen
                    else:
                        w.append(0)
                ######## Sonderzeichen entfernen ########
                try:
                    while True:
                        w.remove(0)
                except ValueError:
                    pass
                ######## Länge des reduzierten Satzes maximal 6 ########
                if len(satz) < 6:
                    l = len(satz)
                else:
                    l = 6
                ######## Auf l Ziffern reduzieren durch Summe & Quersumme ########
                while len(w) > l:
                    linie = []
                    for i in range(0, len(w)-1):
                        x = w[i] + w[i+1]
                        if x > 9:
                            x = sum(int(y) for y in str(x))
                        linie.append(x)
                    w = linie
                vektoren = []
                vektoren.append(w)
                buchstabenwerte = ' '.join(str(i) for i in w)
                display('Buchstabenwerte: ' + buchstabenwerte, target="output1")
                ######## 1. Algorithmus für Rauten ########
                if int(q)==0:
                    try:
                        ######## Iterationsschritte it ########
                        ## Iter. nach Länge: [0, 1, 2, 3, 4, 5, 6]
                        iterationsschritte = [0, 1, 2, 2, 3, 4, 4]
                        it = iterationsschritte[l]
                        ######## Dreieckslinien berechnen ########
                        for k in range(1,it):
                            w2 = []
                            w = vektoren[k-1]
                            linie = []
                            if k % 2 == 0:
                                imax = len(w)-1
                            else:
                                imax = len(w)
                            for i in range(1,imax):
                                if i == 1:
                                    x = w[1] + w[1]
                                else:
                                    x = x + w[i]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                linie.append(x)
                            w2 = linie
                            vektoren.append(w2)
                        maxi = 2*l-1
                        ######## Vektoren spiegeln #######
                        v=vektoren
                        if l < 6:
                            corr = 1
                        else:
                            corr = 2
                        for i in range(0,l-corr):
                            v[i] = vektoren[i][:]
                            if i % 2 == 0:
                                v_inv = vektoren[i][:]
                            else:
                                v_inv = vektoren[i][0:len(v[i])-1]
                            v_inv.reverse()
                            v[i].extend(v_inv)
                        ######## Matrix eines Dreiecks aus den Vektoren ########
                        m = [[0 for col in range(maxi+1)] for row in range(maxi+1)]
                        for n in range(0,it):
                            for i in range(0,maxi+1):
                                for j in range(0,maxi+1):
                                    if (i==n or j==n or i+j==(maxi-n)) and (i>(n-1) and j>(n-1) and i<(maxi-2*n+1) and j<(maxi-2*n+1)):
                                        m[i][j] = v[n][max(i,j)-n]
                        ######## Geometrie Rauten ########
                        xs = math.cos((90-360/int(s))*math.pi/180)
                        ys = math.sin((90-360/int(s))*math.pi/180)
                        ######## TikZJax Latex Code Rauten ########
                        a = ""
                        a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        for i in range(0, maxi+1):
                            for j in range(0, i+1):
                                for k in range(0, len(rhyt)):
                                    if m[maxi-i][j] == rhyt[k]:
                                        if gross == "nein":
                                            a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [anchor = center] {.};"
                                        else:
                                            a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [fill,circle,scale=0.5] {};"
                        a = a + "}"
                    except:
                        pass
                ######## 2. Algorithmus für Quadrate ########
                else:
                    try:
                        #### Kleine Matrix berechnen
                        ma = [[0 for col in range(l)] for row in range(l)]
                        ma[0][:] = w[:]
                        for i in range (1,l):
                            ma[i][i] = w[0]
                            ma[l-i][l-1] = w[i-1]
                        if l == 6:
                            ma[1][l-2] = w[l-1]
                            ma[1][l-3] = w[l-4]
                            ma[1][l-4] = w[l-3]
                            ma[2][l-3] = w[1]
                        if l == 5:
                            ma[1][1:l] = w[0:l-1]
                            ma[1:l][1] = w[0:l-1]
                            ma[2][l-2] = w[l-2]
                        elif l == 4:
                            ma[1][l-2] = w[l-1]
                        if l % 2 == 0:
                            ## Spiegeln
                            for i in range (0,l):
                                for j in range(0,l):
                                    ma[l-i-1][l-j-1] = ma[j][i]
                        ## Spiegeln
                        for i in range (0,l):
                            for j in range(0,i):
                                ma[l-j-1][l-i-1] = ma[j][i]
                        if l == 5:
                            ma[2][1] = ma[1][2]
                            ma[3][2] = ma[2][3]
                        #### Grosse Matrix berechnen (Quadrant)
                        maxi = l + 12
                        m = [[0 for col in range(maxi)] for row in range(maxi)]
                        for i in range (0,l):
                            m[i][0:l] = ma[i][0:l]
                        for i in range (0,l):
                            for k in range (l,maxi):
                                x = m[i][k-1] + m[i][k-2]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                m[i][k] = x
                        for j in range (0,maxi):
                            for k in range (l,maxi):
                                x = m[k-1][j] + m[k-2][j]
                                if x > 9:
                                    x = sum(int(y) for y in str(x))
                                m[k][j] = x
                        maxi = maxi-1
                        ######## Geometrie Quadrate ########
                        xs = 1
                        ys = 0
                        ######## TikZJax Latex Code Quadrate ########
                        a = ""
                        a = a + "\\foreach \\r in {0," + str(360/int(s)) + ",...," + str(360-int(s)) + "}{"
                        for i in range(0, maxi+1):
                            for j in range(0, maxi+1):
                                for k in range(0, len(rhyt)):
                                    if m[maxi-i][j] == rhyt[k]:
                                        if gross == "nein":
                                            a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [anchor = center] {.};"
                                        else:
                                            a = a + "\\draw [rotate = \\r, xscale = " + str(xs) + ", yslant = " + str(ys) + "] (" + str(maxi+0.5-i) + "," + str(j+0.5) + ") node [fill,circle,scale=0.5] {};"
                        a = a + "}"
                    except:
                        pass
                display('Punkte fertig berechnet.', target="output2")
                display('Das Erstellen der Grafik kann bis zu 10 Sek. dauern.', target="output3")
            else:
                display('', target="output1", append=False)
                display('Satz zu kurz (mind. 2 Zeichen).', target="output1")
                a = ""
                display('Keine Punkte berechnet.', target="output2")
            ######## Latex Code in Textfeld schreiben ########
            manual = Element("code")
            manual.element.innerText = a
        </py-script>
  </div>


  <br><br>
  <!-- Images (Portfolio) -->
  <div id="portfolio">
    <h4><b><font color=#053>Gallerie</font></b></h5>
    <img src="images/mandalaprozess_2022_01.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
    <img src="images/mandalaprozess_2022_02.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
    <img src="images/mandalaprozess_2022_03.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
    <img src="images/mandalaprozess_2022_10.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
    <img src="images/mandalaprozess_2022_19.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
    <img src="images/mandalaprozess_2022_20.jpg" alt="Mandala" class="w3-image w3-margin-top" width=32% height=auto>
  </div>
  <br><br>

  <!-- Kontakt -->
  <div id="contact">
    <h4><b><font color=#053>Kontakt</font></b></h5>
    Monika Gloor •
    <a href="mailto:info@farbenweg.ch">info@farbenweg.ch</a>
  </div>
    
  <div class="w3-light-grey w3-padding-large w3-padding-32 w3-margin-top">
    ❁ <small> Mein Mandala </small> ❁ <small> Version 23.05
    <br> Diese Website verwendet: <a href="https://pyscript.net/">Py-Script</a> • <a href="https://github.com/kisonecat/tikzjax">TikZJax</a>
    <br> Diese Website verwendet: <a href="https://robinmoisson.github.io/staticrypt/">StatiCrypt</a> • <a href="https://www.w3schools.com/w3css/tryw3css_templates_photo3.htm">W3.CSS</a>
    <br> Monika Gloor • <a href="mailto:info@farbenweg.ch">info@farbenweg.ch</a>
    </small>&nbsp;♥
  </div>


<!-- End page content -->
</div>

</body>
</html>